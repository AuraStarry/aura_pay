(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2115);let l=(0,s(2373).UU)("https://pxrfjcfvrbeyqfdmvusv.supabase.co","sb_publishable_5cbMLxoMbbX-Fk0oF8kw2A_k13LOZ14");function c(){let[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!0),[i,n]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[x,h]=(0,a.useState)({name:"",sku:"",price:0,currency:"USD",active:!0,description:"",metadata:{}});async function p(){try{n("");let{data:e,error:s}=await l.from("products").select("*").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){n(e.message)}finally{c(!1)}}async function f(e){e.preventDefault();try{if(n(""),u){let{error:e}=await l.from("products").update(x).eq("id",u.id);if(e)throw e}else{let{error:e}=await l.from("products").insert(x);if(e)throw e}o(!1),p()}catch(e){n(e.message)}}async function b(e){if(confirm("確定要刪除此產品？"))try{n("");let{error:t}=await l.from("products").delete().eq("id",e);if(t)throw t;p()}catch(e){n(e.message)}}async function g(e){try{n("");let{error:t}=await l.from("products").update({active:!e.active}).eq("id",e.id);if(t)throw t;p()}catch(e){n(e.message)}}return(0,a.useEffect)(()=>{p()},[]),(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 to-purple-900 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("header",{className:"text-center text-white mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"\uD83D\uDEE0️ Product Management"}),(0,r.jsx)("p",{className:"text-lg opacity-90",children:"Manage your service products & pricing"})]}),i&&(0,r.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-4 max-w-4xl mx-auto",children:["⚠️ Error: ",i]}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:u?"Edit Product":"New Product"}),(0,r.jsx)("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Product Name*"}),(0,r.jsx)("input",{type:"text",required:!0,value:x.name,onChange:e=>h({...x,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., Premium Plan"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"SKU / Product Code*"}),(0,r.jsx)("input",{type:"text",required:!0,value:x.sku,onChange:e=>h({...x,sku:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., PLAN-PREMIUM-001"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Price*"}),(0,r.jsx)("input",{type:"number",required:!0,step:"0.01",min:"0",value:x.price,onChange:e=>h({...x,price:parseFloat(e.target.value)}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Currency"}),(0,r.jsxs)("select",{value:x.currency,onChange:e=>h({...x,currency:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,r.jsx)("option",{value:"USD",children:"USD"}),(0,r.jsx)("option",{value:"TWD",children:"TWD"}),(0,r.jsx)("option",{value:"EUR",children:"EUR"}),(0,r.jsx)("option",{value:"GBP",children:"GBP"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:x.description||"",onChange:e=>h({...x,description:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3,placeholder:"Service details, features, etc."})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"active",checked:x.active,onChange:e=>h({...x,active:e.target.checked}),className:"mr-2 w-4 h-4"}),(0,r.jsx)("label",{htmlFor:"active",className:"text-sm font-medium",children:"Active (visible to customers)"})]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 font-medium",children:u?"Update Product":"Create Product"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(!1),className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})})}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"\uD83D\uDCE6 Products"}),(0,r.jsx)("button",{onClick:function(){m(null),h({name:"",sku:"",price:0,currency:"USD",active:!0,description:"",metadata:{}}),o(!0)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 font-medium",children:"+ New Product"})]}),s?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading products..."}):0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No products yet. Create your first one!"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 border-b",children:[(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-600",children:"Product"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-600",children:"SKU"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-600",children:"Price"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-600",children:"Status"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-600",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),e.description&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,r.jsx)("td",{className:"p-4 font-mono text-sm",children:e.sku}),(0,r.jsxs)("td",{className:"p-4 font-semibold",children:[e.currency," $",parseFloat(String(e.price)).toFixed(2)]}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("button",{onClick:()=>g(e),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{m(e),h({name:e.name,sku:e.sku,price:e.price,currency:e.currency,active:e.active,description:e.description||"",metadata:e.metadata||{}}),o(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 font-medium",children:"Delete"})]})})]},e.id))})]})})]}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsx)("a",{href:"/",className:"text-white hover:text-purple-200 underline",children:"← Back to Dashboard"})})]})})}},6885:(e,t,s)=>{Promise.resolve().then(s.bind(s,5782))}},e=>{e.O(0,[373,441,255,358],()=>e(e.s=6885)),_N_E=e.O()}]);